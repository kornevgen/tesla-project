\section{Введение}
Вычислительные системы играют все большую роль в процессах, от
которых зависит здоровье и жизнь людей. Поэтому необходимо, чтобы
вычислительные системы работали корректно. Основным компонентом
многих вычислительных систем являются микропроцессоры, выполняющие
основные управляющие функции. Тестирование таких систем является
важной задачей, которой и посвящена данная работа.

В данной работе микропроцессор рассматривается как система в целом,
входными данными для которой являются машинные программы,
загруженные в память (далее такие программы будут называться
\emph{тестовыми программами}). Эти программы исполняются, процесс
исполнения протоколируется и затем анализируется. Для
функционального тестирования (к которому относится данная статья)
важно лишь, правильно ли исполнена загруженная программа. Кроме
того, такое тестирование можно проводить еще до выпуска
микропроцессора, с использованием симуляции его модели на языках
Verilog или VHDL.

Методы построения тестовых программ можно разделить на две группы. В
первую группу входят методы, основывающиеся на заданной абстрактной
форме тестовой программы (\emph{тестовом
шаблоне})~\cite{GenesysPro2004, MAATG, mVpGen}. Вторую группу
составляют методы, не основывающиеся на ней (кросс-компиляция,
ручная разработка)~\cite{Mishra}. Тестовые шаблоны описывают
последовательность команд тестовой программы, а вместо конкретных
значений их параметров указывается набор ограничений, которым должны
удовлетворять эти параметры перед выполнением команды. Любой метод
первой группы построения тестовых программ можно представить в виде
двух больших этапов: на первом этапе подготавливается абстрактное
описание тестовой программы и на втором этапе по нему строится
тестовая программа. Именно в таких случаях ставится \emph{задача
генерации тестовых данных} (второй этап). Однако для многих тестовых
программах приходится задавать довольно нетривиальные зависимости
между данными (регистрами, значениями ячеек кэша и т.п.). Практика
показывает, что при использовании штатных средств и алгоритмов
удается строить тестовые программы небольшого размера (до трех
команд), однако для тестирования современных процессоров следовало
бы использовать тестовые программы большего размера. Например, при
тестировании конвейера приходится использовать тестовые программы,
размер которых сопоставим с размером конвейера, а это несколько
десятков команд.

Более точно, задача генерации тестовых данных возникла следующим
образом. Для построения тестовых программ для микропроцессоров была
предложена технологическая цепочка~\cite{kamkin} на основе модели
микропроцессора. Цель генерации задается с помощью критерия
тестового покрытия, выделяющего набор тестовых ситуаций для каждой
инструкции микропроцессора. В методе реализуется направленный
перебор всевозможных сочетаний тестовых ситуаций для
последовательностей инструкций ограниченной длины. Генератору
тестовых программ на вход подаются описания тестируемых инструкций и
тестовых ситуаций для них, возможные типы зависимостей между
инструкциями, а также параметры, управляющие генерацией (например,
длина генерируемых последовательностей инструкций). В общих словах,
построение тестовых программ осуществляется следующим образом.
Генерируются всевозможные последовательности инструкций указанной
длины. Для каждой последовательности инструкций строятся
всевозможные множества зависимостей между ними. Для каждого
множества зависимостей комбинируются всевозможные тестовые ситуации.
Получается тестовый шаблон, поскольку начальное состояние
микропроцессора и значения параметров инструкций в тестовой
программе еще не построены. Завершающим этапом генерации тестовой
программы является генерация начального состояния микропроцессора
(регистров, кэш-памяти, TLB и др.) и констант для тестового шаблона
(это и есть \emph{тестовые данные}), на которых реализуются заданные
зависимости и тестовые ситуации. В работе~\cite{kamkin} этот этап
был описан достаточно схематично. Организации именно этого этапа
(генерации тестовых данных) посвящена данная работа.

Входом генератора тестовых данных является тестовый шаблон и модель
тестовых ситуаций. По ним генератор тестовых данных строит начальное
состояние микропроцессора (т.е. начальные значения регистров, ячеек
кэш-памяти, TLB и др.) и константы для тестового шаблона. Генератор
тестовых данных сводит свою задачу к задаче разрешения ограничений
над целыми числами, которая известна уже не один десяток лет и для
которой разработаны эффективные алгоритмы~\cite{ConstrProp}. Причем
обычно разрешение таких ограничений удается провести в разумные
временные рамки. С использованием такого генератора тестовых данных
удается полностью провести технологическую цепочку построения
тестовых программ для микропроцессоров.

О том, как предлагается описывать тестовый шаблон и тестовые
ситуации, посвящена часть~\ref{scheme}.
Части~\ref{common_algorithm}~--~\ref{sets} посвящены собственно
тому, как следует транслировать эти описания в набор ограничений. В
конце статьи приведены результаты апробации предложенного метода
решения.
