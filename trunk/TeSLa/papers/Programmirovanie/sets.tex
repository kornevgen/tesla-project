\section{јлгоритм распределени€ элементов тестового шаблона по
сетам}\label{sets}

јлгоритм должен распределить команды обращени€ в пам€ть данной схемы
тестовой программы по сетам, т.е. указать, какие команды обращаютс€
в один сет, а какие -- в разные.  омандой обращени€ в пам€ть
считаетс€ така€ команда, в описании тестовой ситуации которой
присутствует вызов функций LoadMemory или StoreMemory.  аждой
команде обращени€ в пам€ть на основе схемы тестовой программы можно
сопоставить выражение -- номер сета. ѕеременными величинами в таких
выражени€х будут начальные значени€ регистров и значени€ €чеек
пам€ти. јлгоритм каждому выражению должен подобрать значение,
возможное на некотором (одинаковом дл€ всех выражений) наборе
значений переменных. ѕричем количество различных таких значений
выражений должно быть как можно больше. ѕо сути алгоритм должен
среди множества выражений-номеров сетов разбить на классы
эквивалентности по отношению тождественности (два выражени€
тождественны, если они определены на одинаковом множестве значений
переменных и в каждой точке области определени€ их значени€
совпадают).

–ассмотрим пример схемы тестовой программы:
\begin{verbatim}
LW x, y, of @ noexception
    -> (mem[y+of]: m1_0) x = m1_0 ,
        s1 = set(y+of)
ADD u, x, x @ noexception
    -> u = x + x (из того, что тест.ситуаци€ noexception)
SW u, y, of @ noexception
    -> (mem[y+of] изменилось: m1_1) m1_1 = u ,
        s2 = set(y+of)
LW z, y, of @ noexception
    -> (mem[y+of] : m1_1) z = m1_1 = u = x + x = m1_0 + m1_0,
        s3 = set(y+of)
LW y, x, of2 @ noexception
    -> (mem[x+of2]: m2_0) y_1 = m2_0,
        s4 = set(x+of2) = set( m1_0 + of2 )
LW y, z, of2 @ noexception
    -> (mem[z+of2]: m3_0) y_2 = m3_0,
        s5 = set(z+of2) = set( m1_0 + m1_0 + of2 )
\end{verbatim}
ѕолучаетс€ следующа€ система ограничений на переменные-адреса
(считаем, что сет задаетс€ битами адреса с 6го по 4й):
$$
\left\{
    \begin{aligned}
        s1 = (y + of)[6..4]\\
        s2 = (y + of)[6..4]\\
        s3 = (y + of)[6..4]\\
        s4 = (m1\_0 + of2)[6..4]\\
        s5 = (m1\_0 + m1\_0 + of2)[6..4]\\
    \end{aligned}
\right.
$$
из которой получаетс€, что $s1 = s2 = s3, \{s3, s4, s5\}$ - разные.
