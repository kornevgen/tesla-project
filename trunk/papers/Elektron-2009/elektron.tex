\documentclass[conference, 10pt]{IEEEtran}
\usepackage[cp1251]{inputenc}
\usepackage[russian]{babel}
\usepackage{pscyr}

%\pagestyle{plain}

\title{Генерация тестовых данных для тестирования кэш-памяти и буфера трансляции страниц микропроцессоров}

\author{\IEEEauthorblockN{Е.В.~Корныхин}
\IEEEauthorblockA{Московский государственный университет им. М.В.~Ломоносова\\
факультет Вычислительной математики и кибернетики\\
Email: kornevgen@gmail.com}}

\begin{document}

\maketitle

\section{Введение}
В~\cite{fifo} описан метод решения задачи, в качестве ответа выдавалось состояние микропроцессора. Генерировать инструкции по его достижению не входило в компетенцию прошлого метода. Несложно придумать инициализирующую программу очень большого размера, а генерация компактной инициализирующей программы -- непростая задача. Кроме того, инициализирующая программа может дать эффект <<четной ошибки>>, т.е. возникновение ошибки в микропроцессоре при исполнении инициализирующей программы не даст возможности обнаружить ошибки собственно на тестовом шаблоне. Поэтому поставлена задача генерации таких тестовых данных, которые максимально учитывали бы имеющееся начальное состояние микропроцессора (состояние кэш-памяти, TLB).

В данной статье описывается алгоритм решения этой задачи при запрете изменения кэша и TLB перед исполнением тестового шаблона. Единственное, что можно менять, это значения регистров (а ячейки памяти ????). Алгоритм может выдать ответ <<нет>>, что означает отсутствие инициализации регистров для удовлетворения шаблона из данного начального состояния кэш-памяти и TLB. При этом алгоритм обеспечивает полное решение задачи, т.е. если алгоритм выдал ответ <<нет>>, то искомые значения регистров действительно не существуют.

\section{Обзор}
Есть DeepTrans~\cite{DeepTrans}, но он работает только на 1
инструкцию (добавляет ограничения в Genesys-Pro~\cite{Genesys-Pro}).

\section{Предварительные сведения}
\subsection{Трансляция адресов}
Что из себя представляет виртуальный адрес, физический адрес, при
трансляции используется TLB, из чего он состоит, как происходит
трансляция адреса. Надо ли говорить про отображаемые области?

\subsection{Механизм работы кэш-памяти}
Деление физического адреса на теги и сеты, механизмы работы
кэш-памяти. Определение <<тегсета>>.

\subsection{Генерация тестовых данных без учета начального состояния
микропроцессора} Просто сформулировать результат прошлых статей о
том, что используются системы уравнений на множества тегов. И какие
это системы. Упомянуть, что ровно то же самое может быть применено и
для micro-TLB -- в качестве (скалярного) тега может использоваться
номер строки TLB. micro-TLB -- полностью ассоциативный кэш, поэтому
там проще система ограничений.

\section{Совместная генерация тестовых данных с учетом начального состояния
микропроцессора}

формулирование системы уравнений на кэш в терминах тегсетов, а не
тегов

смена теговой части micro-TLB при формулировании системы уравнений
на ее поведение: теперь это будет pfn, который является битовой
частью тегсетов

таким образом, формулируется одна система на переменные -- тегсеты.

для каждой инструкции получается набор ограничений принадлежности и
непринадлежности.

Показать, что как минимум 1 ограничение для каждой инструкции будет
ограничением принадлежности. Поэтому множество значений каждой
переменной ограничено. Это ограничение принадлежности в micro-TLB.
Т.к. размер TLB ограничен и TLB не меняется, то значение каждой
переменной-тегсета принимает ограниченный набор значений порядка
размера TLB (обычно он небольшой). Множество констант обычно есть
пересечение множества pfn'в и тегсетов кэш-памяти или вычитание из
множества pfn'в тегсетов кэш-памяти -- оба эти множества обладают
размером не большим, чем двойной размер TLB (порядка сотни).

Итак, для каждой инструкции будет сделан вывод следующего вида:
тегсет принадлежит множеству констант и удовлетворяет ограничению на
равенство/неравенство некоторым предыдущим тегсетам, для вытесняемых
тегсетов тоже строятся множества значений.

Исходя из ограничений равенства, корректируется множество допустимых
констант (может уменьшиться). Если множество констант получилось
пустым, то решения нет.

В довершении формулируются уравнения вытеснения с учетом вариантов
регионов тегсетов (они получаются как битовая часть значений
тегсетов).

Ограничения можно решать либо с помощью SAT, либо с помощью
constraint solver'ов.

\section{Заключение}
В статье представлен алгоритм построения начальных значений
регистров для исполнения тестового шаблона с заданным начальным
состоянием кэш-памяти и TLB. Показано, что этот алгоритм позволяет
достаточно быстро по сравнению с размерами кэш-памяти (обычно это
мегабайты!) находить искомые значения регистров.

\begin{thebibliography}{99}
\bibitem{fifo} Корныхин Е.В. НИВЦ
\bibitem{DeepTrans} DeepTrans
\bibitem{Genesys-Pro} Genesys-Pro
\end{thebibliography}

\end{document}
